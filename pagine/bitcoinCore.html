<!DOCTYPE html>
<html>
<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../css/style.css">
</head>
<body>

<div class="header">
  <h1>Bitcoin core</h1>
</div>
    
<div class="content row">
<div class="row">
      <div class="col-12 menu">
        <ul>
          <li><a href="../index.html">Home</a></li>
	  <li><a href="ipfire.html">ipFire</a></li>
	  <li class="active">Bitcoin core</li>
          <li><a href="crittografia.html">Crittografia</a></li>
          <li>...</li>
          <li>...</li>
          <li>...</li>

        </ul>
      </div>
    </div>   
    
<!-- 
  <div class="col-3 menu">
  </div>

  <div class="col-9">
-->
<div class="col-2 row"></div>

<div class="col-8 row">
    
    <h2>Avvio nodo</h2>
    <p>per avviare il demone:</p>
<pre>

$ bitcoind

</pre>
    <p>le impostazioni verranno prese dal file di configurazione presente in $USER/.bitcoin/bitcoin.conf. 
        Le eventuali impostazioni inserite da riga di comando hanno la precedenza sul file di configurazione.</p>
    <p>Per stoppare il demone:</p>
    <pre>

$ bitcoin-cli stop
    
    </pre>
    <br>
    
    <p>Esempio di file <b>bitcoin.conf</b></p>
    <pre>

daemon=1                        # avvia il demone in background
<code>txindex=1                       # senza questa riga <b>potrebbe non funzionare getrawtransaction</b></code>
datadir=/bitcoindata/bitcoin    # directory dove sono salvati i dati
maxconnections=7                # numero massimo di connessioni
</pre>
    <br>
    
    <h3>-getinfo</h3>
<pre>

$ bitcoin-cli -getinfo

{
  "version": 200100,
  "blocks": 693280,
  "headers": 693280,
  "verificationprogress": 0.9999996588606316,
  "timeoffset": 0,
  "connections": 7,
  "proxy": "",
  "difficulty": 13672594272814.14,
  "chain": "main",
  "balance": 0.00000000,
  "keypoolsize": 1000,
  "paytxfee": 0.00000000,
  "relayfee": 0.00001000,
  "warnings": "Warning: unknown new rules activated (versionbit 2)"
}
</pre>
    <br>
    <h3>getblockchaininfo</h3>
    <pre>

$ bitcoin-cli getblockchaininfo

{
  "chain": "main",
  "blocks": 693280,
  "headers": 693280,
  "bestblockhash": "00000000000000000012cbc5d0a342beb64004c5260c6f7749c5d6dafbd3ecf8",
  "difficulty": 13672594272814.14,
  "mediantime": 1627587739,
  "verificationprogress": 0.9999961220617765,
  "initialblockdownload": false,
  "chainwork": "00000000000000000000000000000000000000001ff039cd483ee740e5d15c38",
  "size_on_disk": <mark>405248736603</mark>,
  "pruned": false,
  "softforks": {
    "bip34": {
      "type": "buried",
      "active": true,
      "height": 227931
    },
    "bip66": {
      "type": "buried",
      "active": true,
      "height": 363725
    },
    "bip65": {
      "type": "buried",
      "active": true,
      "height": 388381
    },
    "csv": {
      "type": "buried",
      "active": true,
      "height": 419328
    },
    "segwit": {
      "type": "buried",
      "active": true,
      "height": 481824
    }
  },
  "warnings": "Warning: unknown new rules activated (versionbit 2)"
}
</pre>
    
<br>
<h2>Ispezioniamo il blocco genesi</h2>
<br>
    <h3>getblockhash</h3>
<pre>

$ bitcoin-cli getblockhash <mark>0</mark>
    
000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f
</pre>
    <h3>getblockheader</h3>
<pre>

$ bitcoin-cli getblockheader 000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f

{
  "hash": "000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",
  "confirmations": 693281,
  "height": 0,
  "version": 1,
  "versionHex": "00000001",
  "merkleroot": "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",
  "time": <mark>1231006505</mark>,<mark style="background-color: orange"><code>$ date --date='@1231006505' --> sab  3 gen 2009, 19.15.05, CET</code></mark>
  "mediantime": 1231006505,
  "nonce": 2083236893,
  "bits": "1d00ffff",
  "difficulty": 1,
  "chainwork": "0000000000000000000000000000000000000000000000000000000100010001",
  "nTx": 1,
  "nextblockhash": "00000000839a8e6886ab5951d76f411475428afc90947ee320161bbf18eb6048"
}</pre>
   
    <br>
   
     
    <h3>getblock</h3>
    <br>
    <pre>

$ bitcoin-cli getblock 000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f

{
  "hash": "000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",
  "confirmations": 693552,
  "strippedsize": 285,
  "size": 285,
  "weight": 1140,
  "height": 0,
  "version": 1,
  "versionHex": "00000001",
  "merkleroot": "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",

  ****************************
  "tx": [
    "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b"
  ],
  ****************************

  "time": 1231006505,
  "mediantime": 1231006505,
  "nonce": 2083236893,
  "bits": "1d00ffff",
  "difficulty": 1,
  "chainwork": "0000000000000000000000000000000000000000000000000000000100010001",
  "nTx": 1,
  "nextblockhash": "00000000839a8e6886ab5951d76f411475428afc90947ee320161bbf18eb6048"
}
</pre>    
    <br>
    <p>nel blocco genesi non posso usare <b>getrawtransaction</b> $TXid (true per avere output json),
    devo aumentare la verbosit√† dell'istruzione getblock</p>
    <br>
    
    
<pre>

$ bitcoin-cli getblock 000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f <mark>2</mark>

{
  "hash": "000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",
  "confirmations": 693758,
  "strippedsize": 285,
  "size": 285,
  "weight": 1140,
  "height": 0,
  "version": 1,
  "versionHex": "00000001",
  "merkleroot": "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",
  "tx": [
    {
      "txid": "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",
      "hash": "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",
      "version": 1,
      "size": 204,
      "vsize": 204,
      "weight": 816,
      "locktime": 0,
      "vin": [
        {
          "coinbase": "04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e6365
6c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73",
          "sequence": 4294967295
        }
      ],
      "vout": [
        {
          "value": 50.00000000,
          "n": 0,
          "scriptPubKey": {
            "asm": "04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3
br>f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5f OP_CHECKSIG",
            "hex": "4104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6b
c3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac",
            "type": "pubkey"
          }
        }
      ],
      "hex": "01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4
d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e20627269
6e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678af
db0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c
384df7ba0b8d578a4c702b6bf11d5fac00000000"
    }
  ],
  "time": 1231006505,
  "mediantime": 1231006505,
  "nonce": 2083236893,
  "bits": "1d00ffff",
  "difficulty": 1,
  "chainwork": "0000000000000000000000000000000000000000000000000000000100010001",
  "nTx": 1,
  "nextblockhash": "00000000839a8e6886ab5951d76f411475428afc90947ee320161bbf18eb6048"
}

    </pre>
    <br>
    <p>Converto i dati della coinbase da HEX ad ASCII</p>
    <pre>echo 5468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66
207365636f6e64206261696c6f757420666f722062616e6b73 | xxd -r -p

<b>The Times 03/Jan/2009 Chancellor on brink of second bailout for banks</b></pre>
    
 <div>
    <table>
        <tr>
            <th>HEX</th><th>ASCII</th>
        </tr>   
        <tr>
            <td>54</td><td>T</td>
        </tr>  
        <tr>
            <td>68</td><td>h</td>
        </tr> 
            <td>65</td><td>e</td>
        <tr> 
            <td>20</td><td>[space]</td>
        </tr>
        <tr>
            <td>54</td><td>T</td>
        </tr>
        <tr>
            <td>...</td><td>...</td>
        </tr>       
    </table>   
    
    
    
    </div>  
    </div>
    <div class="col-2 row"></div>
</div>

<footer>
by Armando       
</footer>  
    
</body>
</html>        